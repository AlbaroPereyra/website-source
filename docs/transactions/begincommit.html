<html>
<head>
<meta name="layout" content="_layout/transaction.html" />
<#assign tx_begincommit="active">
</head>
<body>

<h1>Programmatic</h1>
<p>
A traditional approach for demarcating transactions via a try finally block.
</p>

```java


ebeanServer.beginTransaction();  
try {  
  // fetch some stuff...  
  Customer customer = ebeanServer.find(Customer.class, id);  
  ...  
 
  // save or delete stuff...  
  ebeanServer.save(customer);  
  ...  
  
  // commit the transaction
  ebeanServer.commitTransaction();  
      
} finally {  
  // rollback the transaction if it was not committed
  ebeanServer.endTransaction();  
}   

```

<h2>Use the Transaction</h2>
<p>
You can use the Transaction to explicitly control behaviour.
</p>


```java


Transaction transaction = ebeanServer.beginTransaction();  
try {  
  // turn of cascade persist
  transaction.setCascadePersist(false);

  // control the jdbc batch mode and size
  transaction.setBatchMode(true);
  transaction.setBatchSize(30);
  
  // for a large batch insert if you want to skip 
  // getting the generated keys
  transaction.setBatchGetGeneratedKeys(false);

  // for batch processing via raw SQL you can inform
  // Ebean what tables were modified so that it can 
  // clear the appropriate L2 caches
  String tableName = "o_customer";
  boolean inserts = true;
  boolean upates = true;
  boolean deletes = false;
  transaction.addModification(tableName, inserts, updates, deletes);

  ...
} finally {
  transaction.end();
}  
      

```

</body>
</html>

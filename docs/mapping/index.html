<html>
<head>
  <meta name="layout" content="_layout/docs_mapping.html"/>
<#assign overview = "true">
</head>
<body>

  <h2 id="jpa-mapping">JPA mapping</h2>
  <p>
    Ebean uses the same mapping as per the JPA specification. You can learn and use the
    same mapping annotations. This is generally a very good part of the specification and I'd
    expect this part of the specification to mostly stand the test of time.
  </p>
  <p>
    There are some aspects where JPA is generally insufficient.
  </p>
  <table class="table">
    <tr>
      <th width="25%">Naming convention</th>
      <td>
        <p>
          Ebean uses a Naming convention API. This is relatively important as it typically it
          means we only need to specify a <code>@Column name</code> when the naming convention can't be followed.
        </p>
        <p>
          Similarly we tend to not require explicit use of @JoinColumn or @JoinTable as long as the naming convention
          is followed (which defaults to "underscore naming convention").
        </p>
      </td>
    </tr>
    <tr>
      <th>@Id</th>
      <td>
        Ebean assumes database Id generation is preferred and automatically maps to either <code>Identity</code>
        or <code>Sequence</code> support based on the database platform. This provides good cross database support
        without any extra mapping annotations.
      </td>
    </tr>
    <tr>
      <th>Enum</th>
      <td>
        Enum mapping in JPA is poor. Ebean provides 2 better alternatives in the form of <code>@DbEnumValue</code>
        and <code>@EnumValue</code>. We are monitoring the progress of this issue in the JPA JIRA issue tracker.
      </td>
    </tr>
    <tr>
      <th>FetchType EAGER / LAZY</th>
      <td>
        <p>
          JPA mapping encourages the use of FetchType.EAGER and LAZY which is contrary to Ebean's query approach
          which instead looks to optimise the queries per use case (and provides automatic query tuning by
          profiling the application).
        </p>
        <p>
          The use of EAGER LAZY mapping annotations is generally not useful when using Ebean.
        </p>
      </td>
    </tr>
  </table>

  <h2 id="validation-annotations">@Size and @NotNull</h2>
  <p>
    Ebean supports the use of <code>javax validation</code> annotations <code>@Size</code> and <code>@NotNull</code>.
  </p>
  <table class="table">
    <tr>
      <th width="25%">@Size</th>
      <td>
        Defines the mapped column width. For example, @Size(50) is equivalent to @Column(length=50)
      </td>
    </tr>
    <tr>
      <th>@NotNull</th>
      <td>
        Define the mapped column as non null. Equivalent to @Column(nullable = false) or @ManyToOne(optional=false).
      </td>
    </tr>
  </table>

  <div class="next pull-right">
    <a href="naming-convention" class="btn btn-info">Next: Naming convention</a>
  </div>

</body>
</html>
